#!/bin/bash
################################################################################
#
# CPU benchmark running various tests.
#
# Ulrich Thiel, 2019
# ulthiel.com/math
# mail@ulthiel.com
#
################################################################################

################################################################################
# Integer test
################################################################################
echo "Running integer test..."
int=$({ echo '2^2^23' | time -p bc > /dev/null; } 2>&1 | grep real | awk '{print $2"s"}')

################################################################################
# Floating point test
# This is the Savage benchmark
################################################################################
echo "Running floating point test..."
float=$({ echo 'define tan(x) {return s(x)/c(x);}; scale=12; x=1; for(i=1;i<=160000;++i){x=tan(a(e(l(sqrt(x^2)))))+1.0;}; x;' | time -p bc -l > /dev/null; } 2>&1 | grep real | awk '{print $2"s"}')

################################################################################
# Report
################################################################################
echo "-------------------------"
echo "Integer: $int"
echo "Floating point: $float"
